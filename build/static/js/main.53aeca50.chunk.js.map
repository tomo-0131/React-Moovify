{"version":3,"sources":["components/DescriptionModal.jsx","components/InputText.jsx","components/MovieList.jsx","components/BookList.jsx","server/firebase.js","providers/AuthProvider.jsx","App.jsx","index.js"],"names":["DescriptionModal","show","setShow","content","closeModal","id","onClick","e","stopPropagation","Button","Divider","InputText","searchMovie","searchRakutenBooks","searchText","setSearchText","useState","InputBase","sx","ml","flex","placeholder","value","onChange","target","IconButton","type","size","edge","preventDefault","BookList","book","bookImage","Item","mediumImageUrl","Grid","container","justify","item","xs","Card","className","CardContent","title","width","alt","src","itemCaption","salesDate","firebase","initializeApp","apiKey","process","authDomain","databaseURL","REACT_APP_FIREBASE_DATABASE_URL","projectId","storageBucket","messagingSenderId","appId","measurementId","googleProvider","auth","GoogleAuthProvider","signInWithGoogle","firestore","signInWithPopup","then","res","console","log","catch","err","error","logOut","signOut","document","location","reload","message","AuthContext","createContext","AuthProvider","children","currentUser","setCurrentUser","useEffect","onAuthStateChanged","Provider","App","movies","setMovies","books","setBooks","isLoading","setIsLoading","errorMessage","setErrorMessage","useContext","Box","flexGrow","AppBar","position","color","Toolbar","mr","Typography","variant","component","buttonDom","dig","buttonRender","Paper","p","display","encodeUrl","encodeURI","axios","get","data","Items","map","index","Modal","setAppElement","rootElement","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.53aeca50.chunk.js","sourcesContent":["import { Divider } from \"@mui/material\";\nimport Button from '@mui/material/Button';\n\nexport const DescriptionModal = ({ show, setShow, content}) => {\n  const closeModal = () => {\n    setShow(false)\n  };\n\n  if(show) {\n    return(\n      <div id=\"overlay\" onClick={closeModal}>\n        <div id=\"content\" onClick={(e)=> e.stopPropagation()}>\n          <p>{content}</p>\n          <Button onClick={()=>closeModal()}>CLOSE</Button>\n        </div>\n        <Divider />\n      </div>\n    )\n  } else {\n    return null;\n  }\n}\n","\nimport InputBase from '@mui/material/InputBase';\nimport Divider from '@mui/material/Divider';\nimport IconButton from '@mui/material/IconButton';\nimport SearchIcon from '@mui/icons-material/Search';\nimport { useState } from 'react'\n\nexport const InputText = ({searchMovie, searchRakutenBooks}) => {\n\n  const [searchText, setSearchText] = useState(\"\")\n\n  const handleChange = (e) => {\n    setSearchText(e.target.value);\n  };\n\n  const resetSearchField = () => {\n    setSearchText('')\n  }\n\n  const callSearchFunc = (e) => {\n    e.preventDefault();\n    // searchMovie(searchText);\n    searchRakutenBooks(searchText);\n    resetSearchField()\n  }\n\n\n\n  return (\n    <div id=\"inputBase\">\n      <InputBase\n        id=\"inputBase\"\n        sx={{ ml: 1, flex: 1 }}\n        placeholder=\"映画のタイトルを入力\"\n        value={searchText}\n        onChange={handleChange}\n      />\n      <IconButton type=\"submit\" size=\"large\"  aria-label=\"search\" edge=\"end\" onClick={callSearchFunc}>\n        <SearchIcon />\n      </IconButton>\n    </div>\n  )\n}\n","import { DescriptionModal } from \"./DescriptionModal\"\nimport Divider from '@mui/material/Divider';\nimport Grid from '@mui/material/Grid';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport Button from '@mui/material/Button';\nimport { useState } from \"react\";\nimport Modal from \"react-modal\";\nimport { Opacity, SettingsPhoneTwoTone } from \"@mui/icons-material\";\n\nconst DEFAULT_IMAGE = \"https://m.media-amazon.com/images/M/MV5BMTczNTI2ODUwOF5BMl5BanBnXkFtZTcwMTU0NTIzMw@@._V1_\"\n\nexport const MovieList = ({movie}) => {\n  const poster = movie.Poster === \"N/A\" ? DEFAULT_IMAGE : movie.Poster;\n  const [ show, setShow ] = useState(false);\n\n  const openModal = () => {\n    setShow(true)\n  };\n\n  return (\n  <Grid container justify=\"center\">\n      <Grid item xs={12}>\n        <div data-aos=\"fade-up\">\n          <Card className=\"card\">\n            <Divider />\n\n            <CardContent>\n              <div className=\"movieZone\"  id=\"cardContents\">\n                <h2>{movie.Title}</h2>\n                <div>\n                  <img\n                    width=\"200\"\n                    alt={`TheMovieTitle: ${movie.Title}`}\n                    src={poster}\n                  />\n                </div>\n                <div className=\"modalZone\">\n                  <Button onClick={openModal}>詳細</Button>\n                  <DescriptionModal show={show} setShow={setShow} content={movie.imdbID} />\n                </div>\n                <p>{movie.Year}</p>\n              </div>\n            </CardContent>\n\n          </Card>\n\n        </div>\n      </Grid>\n    </Grid>\n  )\n}\n","import { DescriptionModal } from \"./DescriptionModal\"\nimport Divider from '@mui/material/Divider';\nimport Grid from '@mui/material/Grid';\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport Button from '@mui/material/Button';\nimport { useState } from \"react\";\n\nconst DEFAULT_IMAGE = \"https://m.media-amazon.com/images/M/MV5BMTczNTI2ODUwOF5BMl5BanBnXkFtZTcwMTU0NTIzMw@@._V1_\"\n\nexport const BookList = ({book}) => {\n  // モーダル\n  const [ show, setShow ] = useState(false);\n  const bookImage = book.Item.mediumImageUrl;\n\n  const openModal = () => {\n    setShow(true)\n  };\n\n  return (\n    <Grid container justify=\"center\">\n      <Grid item xs={12}>\n        <div data-aos=\"fade-up\">\n          <Card className=\"card\">\n              <Divider />\n            <CardContent>\n              <div className=\"bookZone\" id=\"cardContents\">\n                <h2>{book.Item.title}</h2>\n                  <img\n                    width=\"200\"\n                    alt={`TheBookTitle: ${book.Item.title}`}\n                    src={bookImage}\n                  />\n                <div className=\"modalZone\">\n                  <Button onClick={openModal}>詳細</Button>\n                  <DescriptionModal show={show} setShow={setShow} content={book.Item.itemCaption} />\n                </div>\n                <p>{ book.Item.salesDate }</p>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </Grid>\n    </Grid>\n  )\n}\n","import firebase from 'firebase/app'\nimport \"firebase/auth\"\nimport \"firebase/firestore\"\n\nfirebase.initializeApp({\n\tapiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n\tauthDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n\tdatabaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n\tprojectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n\tstorageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n\tmessagingSenderId: process.env.REACT_APP_FIREBASE_SENDER_ID,\n\tappId: process.env.REACT_APP_FIREBASE_APP_ID,\n\tmeasurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID,\n});\n\nconst googleProvider = new firebase.auth.GoogleAuthProvider();\n\nexport const auth = firebase.auth()\nexport const db = firebase.firestore()\n\nexport const signInWithGoogle = () => {\n  firebase.auth().signInWithPopup(googleProvider)\n  .then((res) => {\n    console.log(res)\n  }).catch((err) => {\n    console.error(err)\n  })\n}\n\nexport const logOut = () => {\n  firebase.auth().signOut()\n  .then((res) => {\n    console.log(\"ログアウト完了\")\n    document.location.reload();\n  }).catch((error) => {\n    console.error(error.message)\n  })\n}\n","import { createContext, useEffect, useState } from \"react\"\nimport { auth } from \"../server/firebase\";\n\nexport const AuthContext = createContext({});\n//\nexport const AuthProvider = ({children}) => {\n  const [currentUser, setCurrentUser] = useState(null);\n\n  useEffect(()=> {\n    auth.onAuthStateChanged(setCurrentUser)\n  }, [])\n\n  return (\n    <AuthContext.Provider value={{ currentUser }}>\n      { children }\n    </AuthContext.Provider>\n  )\n}\n","import { useContext, useState } from \"react\";\nimport axios from \"axios\";\nimport \"./styles.css\";\nimport Button from '@mui/material/Button';\nimport Input from '@mui/material/Input';\nimport Paper from '@mui/material/Paper';\nimport InputBase from '@mui/material/InputBase';\nimport Divider from '@mui/material/Divider';\nimport IconButton from '@mui/material/IconButton';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport SearchIcon from '@mui/icons-material/Search';\nimport DirectionsIcon from '@mui/icons-material/Directions';\nimport AppBar from '@mui/material/AppBar';\nimport Box from '@mui/material/Box';\nimport Toolbar from '@mui/material/Toolbar';\nimport Typography from '@mui/material/Typography';\nimport Badge from '@mui/material/Badge';\nimport MenuItem from '@mui/material/MenuItem';\nimport Menu from '@mui/material/Menu';\nimport AccountCircle from '@mui/icons-material/AccountCircle';\nimport MailIcon from '@mui/icons-material/Mail';\nimport NotificationsIcon from '@mui/icons-material/Notifications';\nimport MoreIcon from '@mui/icons-material/MoreVert';\nimport Grid from '@mui/material/Grid';\nimport Card from '@mui/material/Card';\nimport CardActions from '@mui/material/CardActions';\nimport CardContent from '@mui/material/CardContent';\nimport { DescriptionModal } from './components/DescriptionModal'\nimport { InputText } from \"./components/InputText\";\nimport { MovieList } from \"./components/MovieList\";\nimport { BookList } from \"./components/BookList\";\nimport dig from 'object-dig';\nimport { AuthProvider } from \"./providers/AuthProvider\";\nimport { AuthContext } from \"./providers/AuthProvider\";\nimport { logOut, signInWithGoogle } from \"./server/firebase\";\n\nconst apikey = process.env.REACT_APP_MOVIE_TOKEN;\n\n\nexport default function App() {\n\n  const [movies, setMovies] = useState([]);\n  const [ books, setBooks] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [errorMessage, setErrorMessage ] = useState('');\n  const [searchText, setSearchText] = useState(\"\")\n  const currentUser = useContext(AuthContext);\n\n  // const searchMovie = (searchText) => {\n  //   setIsLoading(true);\n  //   setErrorMessage(null)\n  //   axios\n  //     .get(\n  //       `https://www.omdbapi.com/?s=${searchText}&apikey=${apikey}`\n  //     )\n  //     .then((res)=> {\n  //       if(res.data.Response === \"True\") {\n  //         setMovies(res.data.Search)\n  //         console.log(res.data.Search)\n  //         setIsLoading(false)\n  //       } else {\n  //         setErrorMessage(\"エラーが発生しました\")\n  //         setIsLoading(false)\n  //       }\n  //     })\n  // };\n\n  // ログイン・ログアウト表示\n  const buttonRender = () => {\n    let buttonDom\n    if(dig(currentUser, 'currentUser', 'uid')) {\n      buttonDom = <button onClick={logOut}>ログアウト</button>\n    } else {\n      buttonDom = <button onClick={signInWithGoogle}>ログイン</button>\n    }\n    return buttonDom\n  }\n\n  // 楽天API 書籍検索\n  const searchRakutenBooks = (searchText) => {\n    setIsLoading(true);\n    setErrorMessage(null);\n    const encodeUrl = encodeURI(searchText)\n    console.log(encodeUrl)\n    axios.get(`https://app.rakuten.co.jp/services/api/BooksBook/Search/20130522?applicationId=1086884900424216159&title=${encodeUrl}&format=json`)\n    .then((res)=>{\n      setBooks[res.data.Items]\n      console.log(res.data.Items)\n      setIsLoading(false);\n    }).catch(() => {\n      setErrorMessage(\"エラーが発生しました\")\n      setIsLoading(false)\n    })\n  }\n\n  return (\n    <AuthProvider>\n      <Box sx={{ flexGrow: 1 }}>\n        <AppBar position=\"static\" color=\"info\">\n          <Toolbar>\n            <IconButton\n              size=\"large\"\n              edge=\"start\"\n              color=\"inherit\"\n              aria-label=\"menu\"\n              sx={{ mr: 2 }}\n            >\n              <MenuIcon />\n            </IconButton>\n            <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\n              BOOKIFY\n            </Typography>\n            {buttonRender()}\n          </Toolbar>\n        </AppBar>\n      </Box>\n      <br />\n\n      <Paper component=\"form\" sx={{ p: '5px 4px', display: 'flex' }}>\n\n      <InputText\n        // searchMovie={searchMovie}\n        searchRakutenBooks={searchRakutenBooks}\n      />\n\n      </Paper>\n\n      <br />\n      {/* <div className=\"movies\">\n        <CardContent id=\"searchResult\">検索結果</CardContent>\n        <div className=\"movies\" >\n          {isLoading && !errorMessage ? (\n            <span>Loading...</span>\n          ) : errorMessage ? (\n            <div>{ errorMessage }</div>\n          ) : (\n            movies.map((movie,index) => (\n              <MovieList key={`${index} - ${movie.Title}`} movie={movie} />\n            ))\n          )}\n        </div>\n      </div> */}\n\n      <div className=\"books\">\n        <CardContent id=\"searchResult\">検索結果</CardContent>\n        <div className=\"books\" >\n          {isLoading && !errorMessage ? (\n            <span>Loading...</span>\n          ) : errorMessage ? (\n            <div>{ errorMessage }</div>\n          ) : (\n            books.map((book, index) => (\n              <BookList key={`${index} - ${book.Item.title}`} book={book} />\n            ))\n          )}\n        </div>\n      </div>\n    </AuthProvider>\n  );\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport Modal from \"react-modal\";\nModal.setAppElement(\"#root\");\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}